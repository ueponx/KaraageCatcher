<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å”æšã’ã‚­ãƒ£ãƒƒãƒã‚²ãƒ¼ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(to bottom, #87CEEB 0%, #87CEEB 70%, #90EE90 70%, #90EE90 100%);
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }

        #gameContainer {
            position: relative;
            width: 800px;
            height: 600px;
            background: linear-gradient(to bottom, #87CEEB 0%, #87CEEB 65%, #90EE90 65%, #90EE90 100%);
            border: 4px solid #333;
            overflow: hidden;
        }

        #gameCanvas {
            position: absolute;
            top: 0;
            left: 0;
        }

        #ui {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            z-index: 10;
        }

        #timer {
            position: absolute;
            top: 10px;
            right: 10px;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            z-index: 10;
        }

        #timerBar {
            position: absolute;
            top: 45px;
            right: 10px;
            width: 200px;
            height: 20px;
            background: rgba(0,0,0,0.5);
            border: 2px solid white;
            border-radius: 10px;
            overflow: hidden;
            z-index: 10;
        }

        #timerBarFill {
            height: 100%;
            background: linear-gradient(to right, #4CAF50, #FFC107, #F44336);
            transition: width 0.1s linear;
        }

        #stunIndicator {
            position: absolute;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            color: #FFD700;
            font-size: 28px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            display: none;
            z-index: 10;
        }

        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            display: none;
            z-index: 20;
        }

        #gameOver h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #FFD700;
        }

        #gameOver p {
            font-size: 24px;
            margin-bottom: 30px;
        }

        #restartBtn {
            padding: 15px 40px;
            font-size: 20px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
        }

        #restartBtn:hover {
            background: #45a049;
        }

        #instructions {
            position: absolute;
            bottom: 10px;
            left: 10px;
            color: white;
            font-size: 14px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            z-index: 10;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <div id="ui">
            ã‚¹ã‚³ã‚¢: <span id="score">0</span>
        </div>
        <div id="timer">
            æ®‹ã‚Šæ™‚é–“: <span id="timeLeft">60</span>ç§’
        </div>
        <div id="timerBar">
            <div id="timerBarFill" style="width: 100%"></div>
        </div>
        <div id="stunIndicator">ğŸ˜µ ã‚¹ã‚¿ãƒ³ä¸­ï¼ ğŸ˜µ</div>
        <div id="instructions">
            æ“ä½œ: â† â†’ ç§»å‹• | ã‚¹ãƒšãƒ¼ã‚¹ ã‚¸ãƒ£ãƒ³ãƒ—<br>
            ğŸ— å”æšã’ = +1ç‚¹ | ğŸ‹ ãƒ¬ãƒ¢ãƒ³ = 2ç§’ã‚¹ã‚¿ãƒ³
        </div>
        <div id="gameOver">
            <h2>ã‚²ãƒ¼ãƒ çµ‚äº†ï¼</h2>
            <p>æœ€çµ‚ã‚¹ã‚³ã‚¢: <span id="finalScore">0</span>ç‚¹</p>
            <button id="restartBtn">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // è¨­å®šã‚’æ ¼ç´ã™ã‚‹å¤‰æ•°
        let config = null;

        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
        let gameState = {
            score: 0,
            timeLeft: 60,
            gameRunning: true,
            isStunned: false,
            stunTimer: 0
        };

        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆåˆæœŸå€¤ã€configèª­ã¿è¾¼ã¿å¾Œã«ä¸Šæ›¸ãï¼‰
        let player = {
            x: 400,
            y: 480,
            width: 40,
            height: 60,
            speed: 5,
            jumpPower: 15,
            velocityY: 0,
            gravity: 0.6,
            isJumping: false,
            groundY: 480
        };

        // æŠ•ã’ã‚‹äººï¼ˆåˆæœŸå€¤ã€configèª­ã¿è¾¼ã¿å¾Œã«ä¸Šæ›¸ãï¼‰
        let thrower = {
            x: 400,
            y: 360,
            width: 40,
            height: 50,
            throwAnimation: 0
        };

        // ã‚¢ã‚¤ãƒ†ãƒ é…åˆ—
        let items = [];

        // config.jsonã‚’èª­ã¿è¾¼ã‚€
        async function loadConfig() {
            try {
                const response = await fetch('config.json');
                config = await response.json();

                // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼è¨­å®šã‚’é©ç”¨
                player.width = config.characters.player.width;
                player.height = config.characters.player.height;
                player.speed = config.characters.player.speed;
                player.jumpPower = config.characters.player.jumpPower;
                player.gravity = config.characters.player.gravity;
                player.groundY = config.characters.player.groundY;
                player.y = config.characters.player.groundY;

                // æŠ•ã’ã‚‹äººè¨­å®šã‚’é©ç”¨
                thrower.x = config.characters.thrower.x;
                thrower.y = config.characters.thrower.y;
                thrower.width = config.characters.thrower.width;
                thrower.height = config.characters.thrower.height;

                console.log('Config loaded successfully:', config);
            } catch (error) {
                console.error('Failed to load config.json:', error);
                alert('è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
            }
        }

        // ã‚­ãƒ¼å…¥åŠ›
        const keys = {};
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            if (e.key === ' ' && !player.isJumping && gameState.gameRunning && !gameState.isStunned) {
                player.velocityY = -player.jumpPower;
                player.isJumping = true;
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        document.getElementById('restartBtn').addEventListener('click', restartGame);

        // é³¥å±…ã‚’æç”»ï¼ˆã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¨å½±ä»˜ãï¼‰
        function drawTorii() {
            // å½±ã‚’æç”»
            ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
            ctx.fillRect(205, 535, 18, 10);  // å·¦æŸ±ã®å½±
            ctx.fillRect(585, 535, 18, 10);  // å³æŸ±ã®å½±

            // æŸ±ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            const pillarGradient = ctx.createLinearGradient(200, 0, 220, 0);
            pillarGradient.addColorStop(0, '#A0522D');
            pillarGradient.addColorStop(0.5, '#D2691E');
            pillarGradient.addColorStop(1, '#8B4513');

            // æŸ±ï¼ˆå·¦ï¼‰
            ctx.fillStyle = pillarGradient;
            ctx.fillRect(200, 280, 20, 240);

            // æŸ±ï¼ˆå³ï¼‰- åŒã˜ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            const pillarGradient2 = ctx.createLinearGradient(580, 0, 600, 0);
            pillarGradient2.addColorStop(0, '#A0522D');
            pillarGradient2.addColorStop(0.5, '#D2691E');
            pillarGradient2.addColorStop(1, '#8B4513');
            ctx.fillStyle = pillarGradient2;
            ctx.fillRect(580, 280, 20, 240);

            // æ¨ªæœ¨ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            const beamGradient = ctx.createLinearGradient(0, 260, 0, 275);
            beamGradient.addColorStop(0, '#D2691E');
            beamGradient.addColorStop(0.5, '#CD853F');
            beamGradient.addColorStop(1, '#8B4513');

            // ä¸Šã®æ¨ªæœ¨ï¼ˆå¤ªï¼‰
            ctx.fillStyle = beamGradient;
            ctx.fillRect(180, 260, 440, 15);

            // ä¸Šã®æ¨ªæœ¨ï¼ˆç´°ï¼‰
            const topBeamGradient = ctx.createLinearGradient(0, 250, 0, 260);
            topBeamGradient.addColorStop(0, '#CD853F');
            topBeamGradient.addColorStop(1, '#A0522D');
            ctx.fillStyle = topBeamGradient;
            ctx.fillRect(170, 250, 460, 10);

            // ä¸‹ã®æ¨ªæœ¨
            const bottomBeamGradient = ctx.createLinearGradient(0, 310, 0, 322);
            bottomBeamGradient.addColorStop(0, '#D2691E');
            bottomBeamGradient.addColorStop(1, '#8B4513');
            ctx.fillStyle = bottomBeamGradient;
            ctx.fillRect(190, 310, 420, 12);

            // è£…é£¾ï¼ˆç«¯ã®é£¾ã‚Šï¼‰
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(185, 265, 10, 10);
            ctx.fillRect(605, 265, 10, 10);

            // ãƒã‚¤ãƒ©ã‚¤ãƒˆè¿½åŠ ï¼ˆå…‰ã®å½“ãŸã‚‹éƒ¨åˆ†ï¼‰
            ctx.fillStyle = 'rgba(255, 228, 181, 0.3)';
            ctx.fillRect(202, 282, 8, 200);  // å·¦æŸ±ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            ctx.fillRect(582, 282, 8, 200);  // å³æŸ±ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
        }

        // æŠ•ã’ã‚‹äººã‚’æç”»ï¼ˆçµµæ–‡å­—ä½¿ç”¨ï¼‰
        function drawThrower() {
            if (!config) return;

            // æŠ•ã’ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            const armOffset = Math.max(0, thrower.throwAnimation);

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¿œã˜ã¦å°‘ã—å‹•ã‹ã™
            const throwX = thrower.x + armOffset * 5;
            const throwY = thrower.y - armOffset * 3;

            ctx.globalAlpha = 1;  // ä¸é€æ˜
            ctx.font = `${config.characters.thrower.fontSize}px Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(config.characters.thrower.emoji, throwX, throwY);

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ¸›è¡°
            if (thrower.throwAnimation > 0) {
                thrower.throwAnimation -= 0.1;
            }
        }

        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’æç”»ï¼ˆçµµæ–‡å­—ä½¿ç”¨ï¼‰
        function drawPlayer() {
            if (!config) return;

            // ã‚¹ã‚¿ãƒ³ä¸­ã¯è‹¦ã—ã„è¡¨æƒ…ã€é€šå¸¸æ™‚ã¯é€šå¸¸ã®è¡¨æƒ…
            const emoji = gameState.isStunned ?
                config.characters.player.stunned :
                config.characters.player.normal;

            ctx.globalAlpha = 1;  // å¸¸ã«ä¸é€æ˜
            ctx.font = `${config.characters.player.fontSize}px Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'bottom';
            ctx.fillText(emoji, player.x, player.y + 30);
        }

        // å”æšã’ã‚’æç”»ï¼ˆçµµæ–‡å­—ä½¿ç”¨ï¼‰
        function drawKaraage(x, y, size) {
            if (!config) return;

            ctx.globalAlpha = 1;  // ä¸é€æ˜
            ctx.font = `${size * config.items.karaage.fontSizeMultiplier}px Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(config.items.karaage.emoji, x, y);
        }

        // ãƒ¬ãƒ¢ãƒ³ã‚’æç”»ï¼ˆçµµæ–‡å­—ä½¿ç”¨ï¼‰
        function drawLemon(x, y, size) {
            if (!config) return;

            ctx.globalAlpha = 1;  // ä¸é€æ˜
            ctx.font = `${size * config.items.lemon.fontSizeMultiplier}px Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(config.items.lemon.emoji, x, y);
        }

        // ã‚¢ã‚¤ãƒ†ãƒ ã‚’ç”Ÿæˆï¼ˆä¸€å›ã§4ã¤æŠ•ã’ã‚‹ï¼‰
        function createItem() {
            if (!config) return;

            // æŠ•ã’ã‚‹äººã®ä½ç½®ã‹ã‚‰æŠ•ã’ã‚‹
            const startX = thrower.x;
            const startY = thrower.y + 30;

            // æŠ•ã’ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒˆãƒªã‚¬ãƒ¼
            thrower.throwAnimation = 1;

            // è¨­å®šã‹ã‚‰ã‚¢ã‚¤ãƒ†ãƒ æ•°ã¨æŠ•ã’æ–¹ã‚’å–å¾—
            const itemsPerThrow = config.throwing.itemsPerThrow;
            const karaageRate = config.items.karaage.spawnRate;

            // ã‚¢ã‚¤ãƒ†ãƒ ã‚’æŠ•ã’ã‚‹
            for (let i = 0; i < itemsPerThrow; i++) {
                const type = Math.random() < karaageRate ? 'karaage' : 'lemon';

                // ãƒ©ãƒ³ãƒ€ãƒ ãªæ–¹å‘ã«æŠ•ã’ã‚‹ï¼ˆå·¦å³ã«åºƒãŒã‚‹ã‚ˆã†ã«ï¼‰
                const angleRange = config.throwing.angleMax - config.throwing.angleMin;
                const angle = config.throwing.angleMin - Math.random() * angleRange;
                const powerRange = config.throwing.powerMax - config.throwing.powerMin;
                const power = config.throwing.powerMin + Math.random() * powerRange;

                const itemConfig = type === 'karaage' ? config.items.karaage : config.items.lemon;

                items.push({
                    x: startX,
                    y: startY,
                    type: type,
                    velocityX: Math.cos(angle * Math.PI / 180) * power,
                    velocityY: Math.sin(angle * Math.PI / 180) * power,
                    gravity: itemConfig.gravity,
                    size: itemConfig.baseSize
                });
            }
        }

        // è¡çªåˆ¤å®š
        function checkCollision(item) {
            const distance = Math.sqrt(
                Math.pow(item.x - player.x, 2) + 
                Math.pow(item.y - (player.y - 30), 2)
            );
            return distance < (item.size + 20);
        }

        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ›´æ–°
        function updatePlayer() {
            if (!gameState.isStunned && gameState.gameRunning) {
                // å·¦å³ç§»å‹•
                if (keys['ArrowLeft'] || keys['a']) {
                    player.x -= player.speed;
                }
                if (keys['ArrowRight'] || keys['d']) {
                    player.x += player.speed;
                }
            }

            // ç”»é¢ç«¯åˆ¶é™
            player.x = Math.max(20, Math.min(780, player.x));

            // ã‚¸ãƒ£ãƒ³ãƒ—å‡¦ç†
            player.velocityY += player.gravity;
            player.y += player.velocityY;

            // ç€åœ°åˆ¤å®š
            if (player.y >= player.groundY) {
                player.y = player.groundY;
                player.velocityY = 0;
                player.isJumping = false;
            }

            // ã‚¹ã‚¿ãƒ³å‡¦ç†
            if (gameState.isStunned) {
                gameState.stunTimer -= 1/60;
                if (gameState.stunTimer <= 0) {
                    gameState.isStunned = false;
                    document.getElementById('stunIndicator').style.display = 'none';
                }
            }
        }

        // ã‚¢ã‚¤ãƒ†ãƒ æ›´æ–°
        function updateItems() {
            if (!config) return;

            for (let i = items.length - 1; i >= 0; i--) {
                // æ”¾ç‰©é‹å‹•ã‚’é©ç”¨
                items[i].velocityY += items[i].gravity;
                items[i].x += items[i].velocityX;
                items[i].y += items[i].velocityY;

                // è¡çªåˆ¤å®š
                if (checkCollision(items[i])) {
                    if (items[i].type === 'karaage') {
                        gameState.score += config.items.karaage.points;
                        document.getElementById('score').textContent = gameState.score;
                    } else if (items[i].type === 'lemon') {
                        gameState.isStunned = true;
                        gameState.stunTimer = config.items.lemon.stunDuration;
                        document.getElementById('stunIndicator').style.display = 'block';
                    }
                    items.splice(i, 1);
                } else if (items[i].y > 600 || items[i].x < -50 || items[i].x > 850) {
                    // ç”»é¢å¤–ã«å‡ºãŸã‚‰å‰Šé™¤
                    items.splice(i, 1);
                }
            }
        }

        // é›²ã‚’æç”»
        function drawClouds() {
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';

            // é›²1
            ctx.beginPath();
            ctx.arc(150, 100, 30, 0, Math.PI * 2);
            ctx.arc(180, 100, 40, 0, Math.PI * 2);
            ctx.arc(210, 100, 30, 0, Math.PI * 2);
            ctx.fill();

            // é›²2
            ctx.beginPath();
            ctx.arc(550, 150, 35, 0, Math.PI * 2);
            ctx.arc(585, 150, 45, 0, Math.PI * 2);
            ctx.arc(620, 150, 35, 0, Math.PI * 2);
            ctx.fill();

            // é›²3
            ctx.beginPath();
            ctx.arc(350, 80, 25, 0, Math.PI * 2);
            ctx.arc(375, 80, 35, 0, Math.PI * 2);
            ctx.arc(400, 80, 25, 0, Math.PI * 2);
            ctx.fill();
        }

        // æç”»
        function draw() {
            // ç©ºã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            const skyGradient = ctx.createLinearGradient(0, 0, 0, 400);
            skyGradient.addColorStop(0, '#87CEEB');
            skyGradient.addColorStop(0.5, '#B0E2FF');
            skyGradient.addColorStop(1, '#E0F6FF');
            ctx.fillStyle = skyGradient;
            ctx.fillRect(0, 0, 800, 400);

            // é›²ã‚’æç”»
            drawClouds();

            // åœ°é¢ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            const groundGradient = ctx.createLinearGradient(0, 400, 0, 600);
            groundGradient.addColorStop(0, '#90EE90');
            groundGradient.addColorStop(0.4, '#7CCD7C');
            groundGradient.addColorStop(1, '#6B8E23');
            ctx.fillStyle = groundGradient;
            ctx.fillRect(0, 400, 800, 200);

            // åœŸã®å±¤
            ctx.fillStyle = '#8B7355';
            ctx.fillRect(0, 540, 800, 60);

            // ã‚ˆã‚Šè©³ç´°ãªè‰
            for (let i = 0; i < 800; i += 15) {
                // è‰ã®é«˜ã•ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«
                const grassHeight = 8 + Math.sin(i * 0.1) * 3;
                ctx.fillStyle = '#228B22';
                ctx.fillRect(i, 535 - grassHeight, 8, grassHeight + 10);
                ctx.fillStyle = '#32CD32';
                ctx.fillRect(i + 3, 535 - grassHeight + 2, 3, grassHeight + 5);
            }

            // é³¥å±…
            drawTorii();

            // æŠ•ã’ã‚‹äºº
            drawThrower();

            // ã‚¢ã‚¤ãƒ†ãƒ 
            items.forEach(item => {
                if (item.type === 'karaage') {
                    drawKaraage(item.x, item.y, item.size);
                } else {
                    drawLemon(item.x, item.y, item.size);
                }
            });

            // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
            drawPlayer();
        }

        // ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—
        let lastItemTime = 0;
        let gameTime = 0;

        function gameLoop() {
            if (!gameState.gameRunning) return;

            gameTime += 1/60;

            // ã‚¢ã‚¤ãƒ†ãƒ ç”Ÿæˆï¼ˆ0.4ç§’ã”ã¨ï¼‰
            if (gameTime - lastItemTime > 0.4) {
                createItem();
                lastItemTime = gameTime;
            }

            updatePlayer();
            updateItems();
            draw();

            requestAnimationFrame(gameLoop);
        }

        // ã‚¿ã‚¤ãƒãƒ¼æ›´æ–°
        function updateTimer() {
            if (!gameState.gameRunning) return;

            gameState.timeLeft--;
            document.getElementById('timeLeft').textContent = gameState.timeLeft;
            
            // ã‚¿ã‚¤ãƒãƒ¼ãƒãƒ¼æ›´æ–°
            const percentage = (gameState.timeLeft / 60) * 100;
            document.getElementById('timerBarFill').style.width = percentage + '%';

            if (gameState.timeLeft <= 0) {
                endGame();
            } else {
                setTimeout(updateTimer, 1000);
            }
        }

        // ã‚²ãƒ¼ãƒ çµ‚äº†
        function endGame() {
            gameState.gameRunning = false;
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('gameOver').style.display = 'block';
        }

        // ã‚²ãƒ¼ãƒ å†é–‹
        function restartGame() {
            if (!config) return;

            gameState = {
                score: 0,
                timeLeft: 60,
                gameRunning: true,
                isStunned: false,
                stunTimer: 0
            };

            player.x = 400;
            player.y = config.characters.player.groundY;
            player.velocityY = 0;
            player.isJumping = false;

            thrower.throwAnimation = 0;

            items = [];
            gameTime = 0;
            lastItemTime = 0;

            document.getElementById('score').textContent = '0';
            document.getElementById('timeLeft').textContent = '60';
            document.getElementById('timerBarFill').style.width = '100%';
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('stunIndicator').style.display = 'none';

            gameLoop();
            updateTimer();
        }

        // åˆæœŸåŒ–å‡¦ç†ï¼šconfigã‚’èª­ã¿è¾¼ã‚“ã§ã‹ã‚‰ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹
        async function initGame() {
            await loadConfig();
            if (config) {
                gameLoop();
                updateTimer();
            }
        }

        // ã‚²ãƒ¼ãƒ é–‹å§‹
        initGame();
    </script>
</body>
</html>
